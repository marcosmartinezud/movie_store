{% extends 'movies/base.html' %}

{% block title %}{{ genre.name }} - Movie Store{% endblock %}

{% block content %}
    <h1>{{ genre.name }}</h1>
    
    <div class="genre-info">
        <p>{{ genre.description }}</p>
        
        <h2>Películas de {{ genre.name }}</h2>
        
        <div class="movie-grid">
            {% for movie in genre.movies.all %}
                <div class="card">
                    <h3>{{ movie.title }}</h3>
                    {% if movie.poster %}
                        <img src="{{ movie.poster }}" alt="{{ movie.title }}" style="max-width: 200px;">
                    {% endif %}
                    <p><strong>Año:</strong> {{ movie.release_year }}</p>
                    <p><strong>Directores:</strong>
                        {% for director in movie.directors.all %}
                            <a href="{% url 'movies:director_detail' director.pk %}" class="tag">{{ director.name }}</a>{% if not forloop.last %}, {% endif %}
                        {% endfor %}
                    </p>
                    <p>{{ movie.description|truncatewords:30 }}</p>
                    <a href="{% url 'movies:movie_detail' movie.pk %}" class="button">Ver detalles</a>
                </div>
            {% empty %}
                <p>No hay películas en este género.</p>
            {% endfor %}
        </div>
    </div>
{% endblock %}